{% extends 'base.html.twig' %}

{% block title %}OSTAJ - On S'Tient Au Jus !{% endblock %}

{% block stylesheets %}{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{{ asset('css/home/home.css') }}">
{% endblock %}

{% block body %}



<!-- ======= Mobile nav toggle button ======= -->
<button type="button" class="mobile-nav-toggle d-xl-none"><i class="icofont-navigation-menu"></i></button>

<!-- ======= Header ======= -->
<header id="header">
    <div class="d-flex flex-column">

        <div class="profile">
            <img src="{{ asset('images/Ostaj.png') }}" alt="" class="img-fluid rounded-circle">
            <h1 class="text-light"><a href="{{ asset('/') }}">On S'Tient Au Jus !</a></h1>
        </div>

        <nav class="nav-menu">
            <ul>
                {% if app.user %}
                    <li class="nav-item">
                        <a class="nav-link collapsed" href="{{ asset('/admin') }}">
                            <i class="bx bx-grid"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link collapsed" href="{{ path('security_logout') }}">
                            <i class="bx bx-exit"></i>
                            <span>Déconnexion</span>
                        </a>
                    </li>
                {% endif %}
                
                <li class="nav-item active">
                    <a class="nav-link collapsed" href="#hero">
                        <i class="bx bx-home"></i>
                        <span>Accueil</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link collapsed" href="#portfolio">
                        <i class="bx bx-home"></i>
                        <span>Produits</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link collapsed" href="#contact">
                        <i class="bx bx-book-content"></i>
                        <span>Réservation</span>
                    </a>
                </li>
            </ul>
        </nav><!-- .nav-menu -->
        <button type="button" class="mobile-nav-toggle d-xl-none"><i class="icofont-navigation-menu"></i></button>

    </div>
</header><!-- End Header -->

<!-- ======= Hero Section ======= -->
 <section id="hero" > <!--class="d-flex flex-column align-content-between align-items-center" -->
    
    <!-- <button class="text-center"><a href="#formulaire_de_resa">Réservez !</a></button> -->
    <div class="hero-container" data-aos="fade-in">
        <h1>On S'tient Au Jus !</h1>
        
    </div>
    <div class="bouton-resa"> <!-- class="d-flex align-column align-items-end justify-content-center" -->
                <a href="#formulaire_de_resa">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                        <i class="bx bx-down-arrow-alt" style="font-weight: 700;"></i>
                    </div>
                </a>
                <p>Réserver votre pain</p>
            </div>
</section><!-- End Hero -->

<main id="main">

        <!-- ======= Portfolio Section ======= -->
    <section id="portfolio" class="portfolio section-bg">
      <div class="container">

        <div class="section-title">
          <h2>Produits</h2>
          <p>Retrouver tous les produits, ainsi que leurs spécificités.</p>
        </div>

        <div class="row" data-aos="fade-up">
          <div class="col-lg-12 d-flex justify-content-center">
            <ul id="portfolio-flters">
              <li data-filter="*" class="filter-active">Tous</li>
              <li data-filter=".filter-pain">Les pains</li>
              <!-- <li data-filter=".filter-card">Les jus</li> -->
              <!-- <li data-filter=".filter-web">Les patisseries</li> -->
            </ul>
          </div>
        </div>

        <div class="row portfolio-container" >

            <div class="card col-lg-4 col-md-6 portfolio-item filter-pain" data-aos="fade-up" data-aos-delay="100">
                <div class="card-img-to portfolio-wrap">
                    <img src="{{ asset('/images/pain_de_campagne.jpg') }}" class="img-fluid" alt="photo du pain de campagne">
                    <div class="portfolio-links">
                        <a href="#formulaire_de_resa">Réserver</a>
                    </div>
                </div>
                <div class="card-body">
                    <p><strong>Le campagne</strong>, fabriqué selon le savoir-faire traditionnel est un pain distingué par sa croûte, la couleur légèrement beige de sa mie et sa saveur quelque peu acide.</p>
                </div>
            </div>

            <div class="card col-lg-4 col-md-6 portfolio-item filter-pain" data-aos="fade-up" data-aos-delay="200">
                <div class="card-img-to portfolio-wrap">
                    <img src="{{ asset('/images/ble_pop.jpg') }}" class="img-fluid" alt="Photo du pain blé pop">
                    <div class="portfolio-links">
                        <a href="#formulaire_de_resa">Réserver</a>
                    </div>
                </div>
                <div class="card-body">
                <p><strong>Le blé pop</strong> est un pain de couleur grisé qui a des arômes légèrement fruités. Il est parfait en pain de tous les jours.</p>
                </div>
            </div>

            <div class="card col-lg-4 col-md-6 portfolio-item filter-pain" data-aos="fade-up" data-aos-delay="300">
                <div class="card-img-to portfolio-wrap">
                    <img src="{{ asset('/images/kalamata.jpg') }}" class="img-fluid" alt="Photo du pain blé pop">
                    <div class="portfolio-links">
                        <a href="#formulaire_de_resa">Réserver</a>
                    </div>
                </div>
                <div class="card-body">
                <p><strong>Le Kalamata</strong> est un pain aux olives de Kalamata. Olives originaire de la Grèce, qui se différencie par sa belle couleur violette.</p>
                </div>
            </div>

        </div>

      </div>
    </section><!-- End Portfolio Section -->


    <!-- ======= Contact Section ======= -->
    <section id="contact" class="contact">
        <div class="container">

            <div class="section-title">
                <h2>Réservation</h2>
                <p>Réservez votre pain afin de le récupérer dans votre bar à jus !</p>
            </div>

            <div class="row" data-aos="fade-in">

                <div class="col-lg-5 d-flex align-items-stretch" data-aos="fade-right">
                    <div class="info">
                        <div class="address">
                            <i class="icofont-google-map"></i>
                            <h4>Adresse:</h4>
                            <p>8 rue Désiré Charton, 93100 Montreuil</p>
                        </div>

                        <!-- <div class="email">
                            <i class="icofont-envelope"></i>
                            <h4>Email:</h4>
                            <p>adresse email ?</p>
                        </div> -->

                        <div class="phone">
                            <i class="icofont-phone"></i>
                            <h4>Téléphone:</h4>
                            <p>06 51 29 65 20</p>
                        </div>
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2624.5313570343665!2d2.4481788760570926!3d48.86714630009075!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47e66d4ef21236e9%3A0x1af09451d7386c42!2s8%20Rue%20D%C3%A9sir%C3%A9%20Charton%2C%2093100%20Montreuil!5e0!3m2!1sfr!2sfr!4v1701300502307!5m2!1sfr!2sfr" frameborder="0" style="border:0; width: 100%; height: 290px;" allowfullscreen></iframe>
                    </div>

                </div>
                
                <div class="col-lg-7 mt-5 mt-lg-0 d-flex align-items-stretch" data-aos="fade-left">
                    <div class="info" id="formulaire_de_resa">
                        <h2 style="color: #173b6c;">Formulaire de réservation</h2>
                        {{ form_start(form) }}
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                {{ form_row(form.nomClient) }}
                            </div>

                            <div class="form-group col-md-6">
                                {{ form_row(form.emailClient) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_row(form.telephoneClient) }}
                        </div>
                        <div class="form-group">
                            <h3>Produits et quantités</h3>
                            <div id="detailCommande" data-prototype="{{ form_widget(form.detailCommande.vars.prototype)|e('html_attr') }}">
                                {% for produitForm in form.detailCommande %}
                                    <div class="produit-quantite">
                                        {{ form_row(produitForm.produit, {'attr': {'class': 'produit', 'placehorder' : 'Sélectionner un produit'}}) }}
                                        {{ form_row(produitForm.quantite) }}
                                    </div>
                                {% endfor %}
                            </div>
                            <a href="#" class="add_produit_link">Ajouter un produit</a>
                        </div>
                        <div class="form-group col-md-6">
                            <small id="emailHelp" class="form-text text-muted">*Vos données restent confidentielles</small>
                        </div>
                        <div class="text-center"><button class="btn btn-primary my-2 mx-2">{{ button_label|default('Réserver') }}</button></div>
                    {{ form_end(form) }}
                    </div>
                </div>

            </div>

        </div>
    </section><!-- End Contact Section -->

</main><!-- End #main -->



<!-- ======= Footer ======= -->
<footer id="footer">
    <div class="container">
        <div class="copyright">
            &copy; Copyright <strong><span>On S'Tient Au Jus</span></strong>
        </div>
    </div>
</footer><!-- End  Footer -->

<a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>
{% block javascripts %}







<script>
    // Script pour ajouter dynamiquement des champs de produits
var $detailCommande = $('#detailCommande');
var index = {{ form.detailCommande|length }};

$('.add_produit_link').click(function(e) {
    addProduitForm($detailCommande);
    e.preventDefault();
    return false;
});

function addProduitForm($detailCommande) {
    var template = $detailCommande.attr('data-prototype').replace(/__name__/g, index);
    var $produitForm = $(template);

    // Désélectionner le produit ayant l'ID 1 dans le champ de sélection de produits
    $produitForm.find('select').val(null);

    // Empêcher de sélectionner un produit déjà choisi dans un autre champ de produit
    var selectedProducts = [];
    $detailCommande.find('select').each(function() {
        var selectedProduct = $(this).val();
        if (selectedProduct !== null) {
            selectedProducts.push(selectedProduct);
        }
    });

    $produitForm.find('select').change(function() {
        var selectedProduct = $(this).val();
        if (selectedProducts.includes(selectedProduct)) {
            alert("Ce produit a déjà été choisi. Veuillez sélectionner un autre produit.");
            $(this).val(null);
        } else {
            selectedProducts.push(selectedProduct);
        }
    });

    $detailCommande.append($produitForm);
    index++;
}


</script>

{% endblock %}




{% endblock %}